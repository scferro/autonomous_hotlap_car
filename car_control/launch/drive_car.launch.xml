<launch>

    <!-- Arguments -->
    <arg name="simulate" default="false"/>
    <arg name="on_robot" default="true"/>
    <arg name="use_controller" default="true"/>

    <!-- Launch simulate nodes if simulate==true -->
    <include file="$(find-pkg-share rviz_description)/launch/simulate.launch.xml" if="$(eval '\'$(var simulate)\' == \'true\'')">
        <arg name="use_rviz" value="true" />
    </include>

    <!-- Launch control_servos node if on_robot==true -->
    <node pkg="car_control" exec="control_servos" if="$(eval '\'$(var on_robot)\' == \'true\'')">
    </node>

    <!-- Launch odometry node if on_robot==true -->
    <node pkg="car_control" exec="odometry" if="$(eval '\'$(var on_robot)\' == \'true\'')">
    </node>
    
    <!-- Launch controller_interface node if use_controller==true -->
    <node pkg="car_control" exec="controller_interface" if="$(eval '\'$(var use_controller)\' == \'true\'')">
    </node>

    <!-- Launch joy node if use_controller==true -->
    <node pkg="joy" exec="joy_node" if="$(eval '\'$(var use_controller)\' == \'true\'')">
    </node>

</launch>