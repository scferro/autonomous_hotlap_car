<launch>

    <!-- Arguments -->
    <arg name="simulate" default="false"/>
    <arg name="on_robot" default="true"/>
    <arg name="use_controller" default="true"/>

    <!-- Launch control_servos node -->
    <node pkg="car_control" exec="control_servos">
        <param name="simulate" value="$(var simulate)" />
    </node>

    <!-- Launch odometry node if on_robot==true -->
    <node pkg="car_control" exec="odometry" if="$(eval '\'$(var on_robot)\' == \'true\'')">
    </node>

    <!-- Launch odometry node if simulate==true -->
    <node pkg="car_control" exec="odometry" if="$(eval '\'$(var simulate)\' == \'true\'')">
    </node>
    
    <!-- Launch controller_interface node if use_controller==true -->
    <node pkg="car_control" exec="controller_interface" if="$(eval '\'$(var use_controller)\' == \'true\'')">
    </node>

    <!-- Launch joy node if use_controller==true -->
    <node pkg="joy" exec="joy_node" if="$(eval '\'$(var use_controller)\' == \'true\'')">
    </node>

</launch>